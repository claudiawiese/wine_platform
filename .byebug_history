exit
user.roles
client.roles
client.expert?
client.client?
client
current_api_user
continue
current_devise_api_user.expert?
exit
exiy
current_devise_api_user.expert?
continue
current_devise_api_user.expert?
continue
current_devise_api_user.expert?
continue
current_devise_api_user.expert?
current_devise_api_user
continue
exit
client.reviews
client.client?
client
get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token_client.access_token }"}
continue
exit
 create(:client)
exit
 get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token_client.access_token }"}
client.client?
client
exit
get '/reviews/11', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
Review.last
get '/reviews/1', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
get '/reviews/destroy', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
delete '/reviews/destroy', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
delete '/reviews', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
put '/reviews', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
patch '/reviews/update/:id', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
patch '/reviews/update', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
continue
exit
 patch '/update', params: { id: review.id, review: { rating: 3 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
      review.reload
review
JSON.parse(response.body)
response
review
exit
  put :update, params: { id: review.id, review: { rating: 3 } }
  patch :update, params: { id: review.id, review: { rating: 3 } }
review
continue
post '/reviews', params: { review: {wine_id: wine.id, rating: 4 } }, headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
exit
  ExternalApiService.new.fetch_wine_data(format)
exit
  ExternalApiService.new.fetch_wine_data(format)
params
format
exit
wine
exit
wine_node.xpath('region').text.present?
wine_node.xpath('region').text.to_s
wine_node.xpath('year').text
wine_node.xpath('year').text.to_i
wine_node.xpath('region').text
 wine_node
 wine_node.xpath('prices/price')
wine
exit
wine
exit
wine.prices
continue
wine_data['prices']
exit
 wine_data['prices'].each do |price_data|
   29:           wine.prices.create(price: price_data['amount'])
   30:         end
wine
exit
create(:wine_with_prices)
wine_with_prices
exit
review.save!
review_params
exit
review_params
review.save!
exit
review_params
review.save!
exit
review.save!
review.save
continue
exit
 get '/reviews', headers: { 'Authorization' => "Bearer #{@devise_api_token.access_token }"}
exit
 get '/reviews', headers: { 'Authorization' => "Bearer #{@devise_api_token.access_token }"}
exit
{ 'Authorization' => "Bearer #{@devise_api_token.access_token }"}
headers: { 'Authorization' => "Bearer #{@devise_api_token.access_token }"}
get '/reviews', headers: { 'Authorization' => "Bearer #{@devise_api_token.access_token }"}
@devise_api_token
exit
 get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
sign_in user
 get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
devise_api_token.access_token
 get '/reviews'
 get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
user.reviews
user1.reviews
review2
review1
Reviews.all
 get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
sign_in user
get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
devise_api_token
user
continue
 render json: @reviews
exit
 json = JSON.parse(response.body)
 get "/reviews/#{review1.id}", headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
exit
  get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
review2
review1
Wine.all
wine
continue
exit
devise_api_token.access_token
devise_api_token.token
  let(:devise_api_token) { create(:devise_api_token, resource_owner: user) }
get '/reviews', headers: { 'Authorization' => "Bearer #{devise_api_token.access_token}" }
continue
exit
get '/reviews/${review1.id}'
get '/reviews/#{review1.id}'
get '/reviews/{review1}'
get '/reviews/1'
exit
User.find(159)
devise_api_token
exit
 post '/users/tokens/sign_in',
        params: {
          email: user.email,
          password: user.password
        }
 post '/users/tokens/sign_in',
        params: {
          email: user.email,
          password: user.password
        }.to_json
   post '/users/tokens/sign_in',
        params: { 
          user: { 
            email: user.email, 
            password: user.password 
          } 
        }
JSON.parse(response.body)
 @auth_token = JSON.parse(response.body)['token']
   post '/users/tokens/sign_in',
        params: { 
          user: { 
            email: user.email, 
            password: user.password 
          } 
        }, 
        headers: { 'Content-Type' => 'application/json', 'Accept' => 'application/json' }
 post '/users/tokens/sign_in',
        params: {
          email: user.email,
          password: user.password
        }.to_json,
        headers: { 'Content-Type' => 'application/json' }
  params: {
          email: user.email,
          password: user.password
        }.to_json,
  post '/users/tokens/sign_in', params: {
        email: user.email,
        password: user.password
      }, as: :json
sign_in user
continue
@auth_token
exit
 post '/users/tokens/sign_in', params: {
                user: {
                  email: user.email,
                  password: user.password
                }
              }
continue
 @auth_token = JSON.parse(response.body)['token']
exit
user.email
JSON.parse(response.body)
exit
JSON.parse(response.body)
 @auth_token = JSON.parse(response.body)['token']
exit
get '/reviews'
get/reviews
sign_in user
exit
get '/reviews'
exit
get '/reviews'
exit
get '/reviews'
sign_in user
exit
user.access_token
user.accesss_token
@auth_token
exit
json.first['average_rating'] == 5.0
json.first['average_rating'] == '5.0'
json.first['average_rating']
exit
json.first
exit
json.first['name']
json[1]['name']
exit
json[1]
json[2]
json[0]
exit
continue
Wine.first
exit
@wine1.prices
 create(:price_history, wine: @wine1, price: 1000.0, recorded_at: Time.now - 1.year)
 @wine1 = create(:wine, name: "Chateau Margaux", variety: "Red Bordeaux Blend", region: "Margaux, Bordeaux, France", year: 2015)
 create(:price_history, wine: @wine1, price: 1000.0, recorded_at: Time.now - 1.year)
 @wine1 = create(:wine, name: "Chateau Margaux", variety: "Red Bordeaux Blend", region: "Margaux, Bordeaux, France", year: 2015)
    8:         @wine2 = create(:wine,name: "Penfolds Grange",variety: "Shiraz",region: "Barossa Valley, South Australia", year: 2010)
create(:wine, name: "Chateau Margaux", variety: "Red Bordeaux Blend", region: "Margaux, Bordeaux, France", year: 2015)
